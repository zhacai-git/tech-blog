---
title: 在electron踩的坑(持续更新)
date: 2022-10-01 20:15:35
tags:
- tech
categories:
- 技术
---
最近在搞一个基于electron的客户端，具体内容暂且不表，下面是近一阵遇到的各种问题以及部分的解决方案。

<!-- more -->

**1.窗口大小设置不符合预期**

我只能说这个问题，在new BrowserWindow中给定的width和height不太像按照实际像素来的，更像是一种比例关系，这点就需要自己调了，很奇怪，没找到解决办法。

**2.自定义标签栏，标签栏上元素无法点击的问题**

这个问题主要在于为了使electron知道这是个标题栏（可拖动），需要在CSS中配置

```css
-webkit-app-region: drag;
```

但这会导致整个标签栏变成可拖动区域，使得鼠标的点击操作不生效了。

目前我找到的解决方案，也是我认为较为完美的，即设置需要点击的元素CSS：

```css
-webkit-app-region: no-drag;
```

即可解决问题。

这破问题卡了我一个多小时，打死也想不到是因为这个造成的，甚至一度怀疑Vue的v-on:click失效了，晕了。

**3.在主进程中引用绝对路径造成的报错**
因为需要自定义一个托盘栏的图标，需要在background.ts中new Tray时给定一个路径。
我在这里引用绝对路径以后就直接报错无法启动了。
目前使用的解决方案是在项目根目录下创建vue.config.js后添加:

```javascript
module.exports = {
  pluginOptions: {
    electronBuilder: {
      nodeIntegration: true
    }
  }
}
```

目前项目还远没有结束，结束前遇到的新坑都会在这里发的。

感觉写桌面客户端好爽，不用考虑适配和响应式，长宽一锁定，随便定位元素。很舒服，比浏览器开发要省事很多。

最后更新:2022/10/02
